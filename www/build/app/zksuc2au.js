/*! Built with http://stenciljs.com */
const{h:t}=window.App;import{m as e,f as i,g as s,k as r,n as a,e as n}from"./chunk-47a7f7dc.js";class c{constructor(){this.searchBar=!0,this.predictions=[],this.query="",this.clearPredictions=(()=>{this.setPredictions([])}),this.getPredictions=(e=>{let i=e.target.value;void 0!==i&&0!==i.length?this.autocomplete.getPlacePredictions({input:i},e=>{if(null===e||0===e.length)return void this.clearPredictions();let i=e.map(e=>t("refuge-prediction",{onClick:()=>{this.searchByPrediction(e)}},e.description));this.setPredictions(i)}):this.clearPredictions()}),this.searchByPrediction=(t=>{this.query=t.structured_formatting.main_text,this.input.value=this.query,this.handleSearch(t),this.clearPredictions()}),this.searchByLocation=(()=>{this.query="My Location",this.input.value=this.query,this.handleSearch(),this.clearPredictions()}),this.handleRightClick=(()=>{this.predictions.length>0?(this.input.value=this.query,this.clearPredictions()):this.input.value.length>0?(this.input.value=null,this.resetAll()):this.searchByLocation()})}componentWillLoad(){}componentDidLoad(){this.store.mapDispatchToProps(this,{setPredictions:e,setResults:i,setMarkers:s,setLoading:r,resetAll:a}),this.store.mapStateToProps(this,t=>{const{app:{service:e,map:i,predictions:s,markers:r,loading:a}}=t;return{service:e,map:i,predictions:s,markers:r,loading:a}})}render(){let e,i,s,r;return s=this.loading?t("ref-spinner",{class:"header-icon left-icon small"}):t("img",{class:"header-icon left-icon",src:"assets/icons/search.svg"}),i=this.input&&this.input.value.length>0||this.loading?"close":"my_location",r=n({"header-icon":!0,"right-icon":!0,"material-icons":!0,location:"my_location"==i}),e=n({"search-container":!0,"bottom-border":0===this.predictions.length}),t("div",{class:e},t("input",{id:"search-input",class:"search-input",placeholder:"Search...",ref:t=>{this.input=t},onInput:this.getPredictions,disabled:this.loading,onFocus:t=>{this.input.select(),this.getPredictions(t)}}),t("div",{class:"header-icon left-icon"},s),t("span",{class:r,onClick:this.handleRightClick},i))}static get is(){return"refuge-header"}static get properties(){return{autocomplete:{type:"Any",attr:"autocomplete"},handleSearch:{type:"Any",attr:"handle-search"},loading:{state:!0},markers:{state:!0},predictions:{state:!0},searchBar:{type:Boolean,attr:"search-bar"},store:{context:"store"}}}static get style(){return"refuge-header{grid-row:1;color:var(--black);background-color:var(--blue-med)}.search-container{display:grid;grid-template-rows:8px auto 8px;grid-template-columns:8px 40px auto 40px 8px;text-align:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box}.bottom-border{-webkit-box-shadow:inset 0 -1px 0 0 var(--blue-dark);box-shadow:inset 0 -1px 0 0 var(--blue-dark)}.search-input{grid-row:2;grid-column:2/5;height:44px;border:1px solid var(--blue-med);outline:0;border-radius:2px;padding:0 40px;-webkit-transition:padding .5s;transition:padding .5s;font:var(--text-body)}.search-input:focus{border:1px solid var(--blue-dark)}.header-icon{grid-row:2;color:var(--black)}.left-icon{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;grid-column:2;text-align:center;-ms-flex-line-pack:center;align-content:center}.right-icon{grid-column:4}.location{color:var(--blue-med)}\@keyframes rotating{from{transform:rotate(0);-webkit-transform:rotate(0)}to{transform:rotate(360deg);-webkit-transform:rotate(360deg)}}\@-webkit-keyframes rotating{from{-webkit-transform:rotate(0)}to{-webkit-transform:rotate(360deg)}}.loading{animation:2s linear infinite rotating;-webkit-animation:2s linear infinite rotating}"}}class o{render(){return t("div",{class:"prediction-container"},t("ref-icon",{classes:"icon marker",icon:"marker-default-a"}),t("span",{class:"prediction-content"},t("slot",null)))}static get is(){return"refuge-prediction"}static get properties(){return{item:{type:"Any",attr:"item"}}}static get style(){return".prediction-container{display:grid;grid-template-columns:48px auto;padding:0 24px;background:0 0;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-line-pack:center;align-content:center}.prediction-left{display:-webkit-box;display:-ms-flexbox;display:flex;grid-column:1;text-align:center}.prediction-content{padding:32px 0;display:-webkit-box;display:-ms-flexbox;display:flex;grid-column:2;height:100%;border-bottom:1px solid var(--light-grey)}"}}export{c as RefugeHeader,o as RefugePrediction};