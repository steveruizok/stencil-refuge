/*! Built with http://stenciljs.com */
const{h:t}=window.stencilrouter;import{a as e}from"./chunk-3ab8d39e.js";import{a as n,c as o,d as r,e as i,f as s,g as a,h as l,i as c,j as u,k as h}from"./chunk-f6f5a081.js";var p=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function s(t){try{l(o.next(t))}catch(t){i(t)}}function a(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}l((o=o.apply(t,e||[])).next())})};class d{constructor(){this.group=window.crypto?([1e7].toString()+-1e3.toString()+-4e3.toString()+-8e3.toString()+-1e11.toString()).replace(/[018]/g,function(t){return(t^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}):(1e17*Math.random()).toString().match(/.{4}/g).join("-"),this.scrollTopOffset=null,this.activeIndex=null}componentWillLoad(){this.regenerateSubscribers(this.location)}regenerateSubscribers(t){return p(this,void 0,void 0,function*(){let e=null;var o,r,i;if(this.subscribers=Array.from(this.el.children).map((s,a)=>{const l=(o=t.pathname,r=s.url,i=s.exact,n(o,{path:r,exact:i,strict:!0}));return l&&null===e&&(e=a),{el:s,match:l}}),this.activeIndex===e)return void(this.subscribers[this.activeIndex].el.groupMatch=this.subscribers[this.activeIndex].match);this.activeIndex=e;const s=yield new Promise(t=>{const e=this.subscribers[this.activeIndex];e.el.scrollTopOffset=this.scrollTopOffset,e.el.group=this.group,e.el.groupMatch=e.match,e.el.componentUpdated=t});this.queue.write(()=>{this.subscribers.forEach((t,e)=>{if(t.el.componentUpdated=null,e===this.activeIndex)return t.el.style.display=null;t.el.scrollTopOffset=this.scrollTopOffset,t.el.group=this.group,t.el.groupMatch=null,t.el.style.display="none"})}),s()})}render(){return t("slot",null)}static get is(){return"stencil-route-switch"}static get properties(){return{el:{elementRef:!0},group:{type:String,attr:"group",reflectToAttr:!0},location:{type:"Any",attr:"location",watchCallbacks:["regenerateSubscribers"]},queue:{context:"queue"},scrollTopOffset:{type:Number,attr:"scroll-top-offset"}}}}e.injectProps(d,["location"]);class f{constructor(){this.titleSuffix="",this.title=""}componentWillLoad(){document.title=`${this.title}${this.titleSuffix||""}`}static get is(){return"stencil-route-title"}static get properties(){return{el:{elementRef:!0},title:{type:String,attr:"title"},titleSuffix:{type:String,attr:"title-suffix"}}}}function g(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)}function m(t,e){return g(t,e)?t.substr(e.length):t}function y(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function w(t){return"/"===t.charAt(0)?t:"/"+t}function b(t){return"/"===t.charAt(0)?t.substr(1):t}function k(t){const{pathname:e,search:n,hash:o}=t;let r=e||"/";return n&&"?"!==n&&(r+="?"===n.charAt(0)?n:`?${n}`),o&&"#"!==o&&(r+="#"===o.charAt(0)?o:`#${o}`),r}function x(t){return"/"===t.charAt(0)}function v(t,e){for(let n=e,o=n+1,r=t.length;o<r;n+=1,o+=1)t[n]=t[o];t.pop()}function S(t,e,n,o){let r;"string"==typeof t?(r=function(t){let e=t||"/",n="",o="";const r=e.indexOf("#");-1!==r&&(o=e.substr(r),e=e.substr(0,r));const i=e.indexOf("?");return-1!==i&&(n=e.substr(i),e=e.substr(0,i)),{pathname:e,search:"?"===n?"":n,hash:"#"===o?"":o}}(t)).state=e:(void 0===(r=Object.assign({},t)).pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==e&&void 0===r.state&&(r.state=e));try{r.pathname=decodeURI(r.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}var i;return n&&(r.key=n),o?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=function(t,e=""){const n=t&&t.split("/")||[];let o=e&&e.split("/")||[];const r=t&&x(t),i=e&&x(e),s=r||i;if(t&&x(t)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";let a;if(o.length){const t=o[o.length-1];a="."===t||".."===t||""===t}else a=!1;let l=0;for(let t=o.length;t>=0;t--){const e=o[t];"."===e?v(o,t):".."===e?(v(o,t),l++):l&&(v(o,t),l--)}if(!s)for(;l--;l)o.unshift("..");!s||""===o[0]||o[0]&&x(o[0])||o.unshift("");let c=o.join("/");return a&&"/"!==c.substr(-1)&&(c+="/"),c}(r.pathname,o.pathname)):r.pathname=o.pathname:r.pathname||(r.pathname="/"),r.query=(i=r.search)?(/^[?#]/.test(i)?i.slice(1):i).split("&").reduce((t,e)=>{let[n,o]=e.split("=");return t[n]=o?decodeURIComponent(o.replace(/\+/g," ")):"",t},{}):{},r}function P(t,...e){t||console.error(...e)}function O(t,...e){t||console.warn(...e)}e.injectProps(f,["titleSuffix"]);const L=()=>{let t,e=[];return{setPrompt:e=>(O(null==t,"A history supports only one prompt at a time"),t=e,()=>{t===e&&(t=null)}),confirmTransitionTo:(e,n,o,r)=>{if(null!=t){const i="function"==typeof t?t(e,n):t;"string"==typeof i?"function"==typeof o?o(i,r):(O(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),r(!0)):r(!1!==i)}else r(!0)},appendListener:t=>{let n=!0;const o=(...e)=>{n&&t(...e)};return e.push(o),()=>{n=!1,e=e.filter(t=>t!==o)}},notifyListeners:(...t)=>{e.forEach(e=>e(...t))}}},T=(t="scrollPositions")=>{let e=new Map;function n(t,n){if(e.set(t,n),o("sessionStorage")){const t=[];e.forEach((e,n)=>{t.push([n,e])}),window.sessionStorage.setItem("scrollPositions",JSON.stringify(t))}}return o("sessionStorage")&&(e=window.sessionStorage.getItem(t)?new Map(JSON.parse(window.sessionStorage.getItem(t))):e),"scrollRestoration"in history&&(history.scrollRestoration="manual"),{set:n,get:function(t){return e.get(t)},has:function(t){return e.has(t)},capture:function(t){n(t,[window.scrollX,window.scrollY])}}},R=()=>{try{return window.history.state||{}}catch(t){return{}}},A={hashbang:{encodePath:t=>"!"===t.charAt(0)?t:"!/"+b(t),decodePath:t=>"!"===t.charAt(0)?t.substr(1):t},noslash:{encodePath:b,decodePath:w},slash:{encodePath:w,decodePath:w}},j=()=>{const t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)},U=t=>{const e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,e>=0?e:0)+"#"+t)};var E=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function s(t){try{l(o.next(t))}catch(t){i(t)}}function a(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}l((o=o.apply(t,e||[])).next())})};const I={browser:(t={})=>{P(r,"Browser history needs a DOM");const e=window.history,n=l(),o=!c(),h=T(),{forceRefresh:p=!1,getUserConfirmation:d=a,keyLength:f=6}=t,b=t.basename?y(w(t.basename)):"",x=t=>{t=t||{};const{key:e,state:n}=t,{pathname:o,search:r,hash:i}=window.location;let s=o+r+i;return O(!b||g(s,b),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+s+'" to begin with "'+b+'".'),b&&(s=m(s,b)),S(s,n,e)},v=()=>Math.random().toString(36).substr(2,f),A=L(),j=t=>{h.capture(N.location.key),Object.assign(N,t),N.location.scrollPosition=h.get(N.location.key),N.length=e.length,A.notifyListeners(N.location,N.action)},U=t=>{u(t)||D(x(t.state))},E=()=>{D(x(R()))};let I=!1;const D=t=>{if(I)I=!1,j();else{const e="POP";A.confirmTransitionTo(t,e,d,n=>{n?j({action:e,location:t}):H(t)})}},H=t=>{const e=N.location;let n=C.indexOf(e.key);-1===n&&(n=0);let o=C.indexOf(t.key);-1===o&&(o=0);const r=n-o;r&&(I=!0,Y(r))},M=x(R());let C=[M.key];const B=t=>b+k(t),Y=t=>{e.go(t)};let $=0;const q=t=>{1===($+=t)?(i(window,"popstate",U),o&&i(window,"hashchange",E)):0===$&&(s(window,"popstate",U),o&&s(window,"hashchange",E))};let W=!1;const N={length:e.length,action:"POP",location:M,createHref:B,push:(t,o)=>{O(!("object"==typeof t&&void 0!==t.state&&void 0!==o),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");const r=S(t,o,v(),N.location);A.confirmTransitionTo(r,"PUSH",d,t=>{if(!t)return;const o=B(r),{key:i,state:s}=r;if(n)if(e.pushState({key:i,state:s},null,o),p)window.location.href=o;else{const t=C.indexOf(N.location.key),e=C.slice(0,-1===t?0:t+1);e.push(r.key),C=e,j({action:"PUSH",location:r})}else O(void 0===s,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=o})},replace:(t,o)=>{O(!("object"==typeof t&&void 0!==t.state&&void 0!==o),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");const r=S(t,o,v(),N.location);A.confirmTransitionTo(r,"REPLACE",d,t=>{if(!t)return;const o=B(r),{key:i,state:s}=r;if(n)if(e.replaceState({key:i,state:s},null,o),p)window.location.replace(o);else{const t=C.indexOf(N.location.key);-1!==t&&(C[t]=r.key),j({action:"REPLACE",location:r})}else O(void 0===s,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(o)})},go:Y,goBack:()=>Y(-1),goForward:()=>Y(1),block:(t="")=>{const e=A.setPrompt(t);return W||(q(1),W=!0),()=>(W&&(W=!1,q(-1)),e())},listen:t=>{const e=A.appendListener(t);return q(1),()=>{q(-1),e()}}};return N},hash:(t={})=>{P(r,"Hash history needs a DOM");const e=window.history,n=h(),{getUserConfirmation:o=a,hashType:l="slash"}=t,c=t.basename?y(w(t.basename)):"",{encodePath:u,decodePath:p}=A[l],d=()=>{let t=p(j());return O(!c||g(t,c),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+c+'".'),c&&(t=m(t,c)),S(t)},f=L(),b=t=>{Object.assign(N,t),N.length=e.length,f.notifyListeners(N.location,N.action)};let x=!1,v=null;const T=()=>{const t=j(),e=u(t);if(t!==e)U(e);else{const t=d(),e=N.location;if(!x&&(H=t,(D=e).pathname===H.pathname&&D.search===H.search&&D.hash===H.hash&&D.key===H.key&&function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(Array.isArray(e))return Array.isArray(n)&&e.length===n.length&&e.every(function(e,o){return t(e,n[o])});const o=typeof e;if(o!==typeof n)return!1;if("object"===o){const o=e.valueOf(),r=n.valueOf();if(o!==e||r!==n)return t(o,r);const i=Object.keys(e),s=Object.keys(n);return i.length===s.length&&i.every(function(o){return t(e[o],n[o])})}return!1}(D.state,H.state)))return;if(v===k(t))return;v=null,R(t)}},R=t=>{if(x)x=!1,b();else{const e="POP";f.confirmTransitionTo(t,e,o,n=>{n?b({action:e,location:t}):E(t)})}},E=t=>{const e=N.location;let n=B.lastIndexOf(k(e));-1===n&&(n=0);let o=B.lastIndexOf(k(t));-1===o&&(o=0);const r=n-o;r&&(x=!0,Y(r))},I=j(),M=u(I);I!==M&&U(M);const C=d();let B=[k(C)];const Y=t=>{O(n,"Hash history go(n) causes a full page reload in this browser"),e.go(t)};let $=0;const q=t=>{1===($+=t)?i(window,"hashchange",T):0===$&&s(window,"hashchange",T)};let W=!1;const N={length:e.length,action:"POP",location:C,createHref:t=>"#"+u(c+k(t)),push:(t,e)=>{O(void 0===e,"Hash history cannot push state; it is ignored");const n=S(t,void 0,void 0,N.location);f.confirmTransitionTo(n,"PUSH",o,t=>{if(!t)return;const e=k(n),o=u(c+e);if(j()!==o){v=e,(t=>window.location.hash=t)(o);const t=B.lastIndexOf(k(N.location)),r=B.slice(0,-1===t?0:t+1);r.push(e),B=r,b({action:"PUSH",location:n})}else O(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),b()})},replace:(t,e)=>{O(void 0===e,"Hash history cannot replace state; it is ignored");const n=S(t,void 0,void 0,N.location);f.confirmTransitionTo(n,"REPLACE",o,t=>{if(!t)return;const e=k(n),o=u(c+e);j()!==o&&(v=e,U(o));const r=B.indexOf(k(N.location));-1!==r&&(B[r]=e),b({action:"REPLACE",location:n})})},go:Y,goBack:()=>Y(-1),goForward:()=>Y(1),block:(t="")=>{const e=f.setPrompt(t);return W||(q(1),W=!0),()=>(W&&(W=!1,q(-1)),e())},listen:t=>{const e=f.appendListener(t);return q(1),()=>{q(-1),e()}}};return N}};var D,H;class M{constructor(){this.root="/",this.historyType="browser",this.titleSuffix="",this.asyncListeners=[],this.asyncGroups={}}componentWillLoad(){this.history=I[this.historyType](),this.history.listen(t=>E(this,void 0,void 0,function*(){t=this.getLocation(t),this.location=t})),this.location=this.getLocation(this.history.location)}getLocation(t){const e=0==t.pathname.indexOf(this.root)?"/"+t.pathname.slice(this.root.length):t.pathname;return Object.assign({},t,{pathname:e})}render(){const n={location:this.location,titleSuffix:this.titleSuffix,root:this.root,history:this.history};return t(e.Provider,{state:n},t("slot",null))}static get is(){return"stencil-router"}static get properties(){return{history:{state:!0},historyType:{type:String,attr:"history-type"},location:{state:!0},root:{type:String,attr:"root"},titleSuffix:{type:String,attr:"title-suffix"}}}}class C{constructor(){this.history=null,this.root=null}componentWillLoad(){return this.history.replace(this.getUrl(this.url))}getUrl(t){return"/"==t.charAt(0)&&"/"==this.root.charAt(this.root.length-1)?this.root.slice(0,this.root.length-1)+t:this.root+t}static get is(){return"stencil-router-redirect"}static get properties(){return{el:{elementRef:!0},history:{type:"Any",attr:"history"},root:{type:String,attr:"root"},url:{type:String,attr:"url"}}}}e.injectProps(C,["history","root"]);const B=e=>{var{component:n}=e,o=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&(n[o[r]]=t[o[r]])}return n}(e,["component"]);return t("stencil-route",Object.assign({},o,{routeRender:e=>window.userAuthenticated?t(n,Object.assign({},e,e.componentProps)):t("stencil-router-redirect",{url:"/"})}))};class Y{render(){return t("stencil-router",{"title-suffix":" - Stencil Router Demos"},t("ul",null,t("li",null,t("stencil-route-link",{url:"/",exact:!0},"Exact Base Link")),t("li",null,t("stencil-route-link",{url:"/"},"Base Link")),t("li",null,t("stencil-route-link",{url:"/demo",urlMatch:["/demo","/demox"],exact:!0},"Demo Link")),t("li",null,t("stencil-route-link",{url:"/demo2"},"Demo2 Link")),t("li",null,t("stencil-route-link",{url:"/demo3"},"Demo3 Link")),t("li",null,t("stencil-route-link",{url:"/demo3/page1"},"Demo3 Page1 Link")),t("li",null,t("stencil-route-link",{url:"/demo3/page2"},"Demo3 Page2 Link")),t("li",null,t("stencil-route-link",{url:"/demo4"},"Demo4 Link")),t("li",null,t("stencil-route-link",{anchorClass:"what",url:"/demo6/"},"Demo6 Link")),t("li",null,t("stencil-route-link",{anchorTabIndex:"1",url:"/demo7/"},"Demo7 Link")),t("stencil-route-link",{custom:"li",url:"/demo8/"},"Demo8 Link")),t("stencil-route-switch",null,t("stencil-route",{url:"/",exact:!0,routeRender:e=>t("span",null,"rendering /")}),t("stencil-route",{url:["/demo","/demox"],routeRender:e=>t("div",null,t("stencil-route-title",{title:"DEMO"}),t("span",null,"rendering /demo"),t("li",null,t("stencil-route-link",{url:"/demo3"},"Demo3 Link")))}),t("stencil-route",{url:"/demo2",routeRender:e=>[t("span",null,"rendering /demo2"),t("stencil-router-redirect",{url:"/demo3"})]}),t("stencil-route",{url:"/demo3",component:"test-demo-three"}),t("stencil-route",{url:"/demo4",component:"test-demo-four"}),t("stencil-route",{url:"/demo5",component:"async-content",componentProps:{location:"/"}}),t("stencil-route",{url:"/demo6",component:"test-demo-six"}),t(B,{url:"/demo7",component:"test-demo-six",componentProps:{testing:!0}}),t("stencil-route",{url:"/demo8",routeRender:e=>[t("stencil-route-title",{title:"Demo 8"}),t("span",null,"rendering /demo 8")]}),t("stencil-route",{routeRender:()=>t("span",null,"The route is not found")})))}static get is(){return"test-app"}}export{d as StencilRouteSwitch,f as StencilRouteTitle,M as StencilRouter,C as StencilRouterRedirect,Y as TestApp};